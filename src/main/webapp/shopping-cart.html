<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>行之 | 你的医疗助手 | 购物车</title><!-- Stylesheets -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
    <link rel="icon" href="images/favicon.png" type="image/x-icon"><!-- Responsive -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
</head>

<body>
    <div class="page-wrapper">
        <!-- Preloader -->
        <div class="preloader"></div><!-- Main Header-->
        <header class="main-header header-style-two">
            <!-- Header top -->
            <div class="header-top-two">
                <div class="auto-container">
                    <div class="inner-container">
                        <div class="top-left">
                            <ul class="contact-list clearfix">
                                <li><i class="flaticon-hospital-1"></i>西安邮电大学<br>中国西安</li>
                                <li><i class="flaticon-back-in-time"></i>周一 - 周六 8.00 - 18.00.<br>周末关门</li>
                            </ul>
                        </div>
                        <div class="top-right">
                            <ul class="social-icon-one">
                                <li><a href="#"><span class="fab fa-weixin"></span></a></li>
                                <li><a href="#"><span class="fab fa-qq"></span></a></li>
                                <li><a href="#"><span class="fab fa-weibo"></span></a></li>
                            </ul>
                            <div class="btn-box"><a class="theme-btn btn-style-three" href="appointment.jsp"
                                                    id="appointment-btn"><span
                                    class="btn-title">联系我们</span></a></div>
                        </div>
                    </div>
                </div>
            </div><!-- End Header Top -->
            <!-- Header Lower -->
            <div class="header-lower">
                <div class="auto-container">
                    <!-- Main box -->
                    <div class="main-box">
                        <div class="logo-box">
                            <div class="logo"><a href="index.html"><img src="images/logo-9.png" alt="" title=""></a>
                            </div>
                        </div>
                        <!--Nav Box-->
                        <div class="nav-outer">
                            <nav class="nav main-menu">
                                <ul class="navigation" id="navbar">
                                    <li><a href="index.html">主页</a>
                                    </li>
                                    <li class="dropdown"><span>关于</span>
                                        <ul>
                                            <li><a href="about-us.jsp">关于我们</a></li>
                                            <li><a href="services.jsp">服务</a></li>
                                            <li><a href="elements.jsp">更多内容</a></li>
                                            <li><a href="terms-and-condition.jsp">我们的团队</a></li>
                                        </ul>
                                    </li>
                                    <li ><a href="doctors.jsp">医生团队</a> </li>
                                    <li><a href="departments.html">部门</a> </li>
                                    <li><a href="blog.html">博客</a></li>
                                    <li class="dropdown"><span>商店</span>
                                        <ul>
                                            <li><a href="shop.jsp">商店</a></li>
                                            <li class="current"><a href="shopping-cart.html">购物车</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="contact.jsp">联系我们</a></li>
                                </ul>
                            </nav><!-- Main Menu End-->
                            <div class="outer-box">
                                <!-- Cart Btn --><button class="cart-btn"><i
                                        class="icon flaticon-shopping-cart"></i><span
                                        class="count">3</span></button><button class="search-btn"><span
                                        class="fa fa-search"></span></button></div>
                        </div>
                    </div>
                </div>
            </div><!-- Sticky Header -->
            <div class="sticky-header">
                <div class="auto-container">
                    <div class="main-box">
                        <div class="logo-box">
                            <div class="logo"><a href="index.html"><img src="images/logo.png" alt="" title=""></a></div>
                        </div>
                        <!--Keep This Empty / Menu will come through Javascript-->
                    </div>
                </div>
            </div><!-- End Sticky Menu -->
            <!-- Mobile Header -->
            <div class="mobile-header">
                <div class="logo"><a href="index.html"><img src="images/logo.png" alt="" title=""></a></div>
                <!--Nav Box-->
                <div class="nav-outer clearfix">
                    <div class="outer-box">
                        <!-- Search Btn -->
                        <div class="search-box"><button class="search-btn mobile-search-btn"><i
                                    class="flaticon-magnifying-glass"></i></button></div><!-- Cart Btn --><button
                            class="cart-btn"><i class="icon flaticon-shopping-cart"></i><span
                                class="count">3</span></button><a href="#nav-mobile"
                            class="mobile-nav-toggler navbar-trigger"><span class="fa fa-bars"></span></a>
                    </div>
                </div>
            </div><!-- Mobile Nav -->
            <div id="nav-mobile"></div><!-- Header Search -->
            <div class="search-popup"><span class="search-back-drop"></span><button class="close-search"><span
                        class="fa fa-times"></span></button>
                <div class="search-inner">
                    <form method="post" action="blog-showcase.html">
                        <div class="form-group"><input type="search" name="search-field" value=""
                                placeholder="Search..." required=""><button type="submit"><i
                                    class="flaticon-magnifying-glass"></i></button></div>
                    </form>
                </div>
            </div><!-- End Header Search -->
            <!-- Sidebar Cart -->
            <div class="sidebar-cart"><span class="cart-back-drop"></span>
                <div class="shopping-cart">
                    <div class="cart-header">
                        <div class="title">Shopping Cart <span>(3)</span></div><button class="close-cart"><span
                                class="flaticon-add"></span></button>
                    </div>
                    <ul class="shopping-cart-items" id="card_container">
                        <li class="cart-item"><img src="images/resource/products/product-thumb-1.jpg" alt="#"
                                                   class="thumb" /><span class="item-name">First Aid Kit</span><span
                                class="item-quantity">1 x <span class="item-amount">$50.00</span></span><a
                                href="shop-single.jsp" class="product-detail"></a><button
                                class="remove">Remove</button></li>
                        <li class="cart-item"><img src="images/resource/products/product-thumb-2.jpg" alt="#"
                                                   class="thumb" /><span class="item-name">Vitamin Tablet</span><span
                                class="item-quantity">1 x <span class="item-amount">$25.00</span></span><a
                                href="shop-single.jsp" class="product-detail"></a><button
                                class="remove">Remove</button></li>
                        <li class="cart-item"><img src="images/resource/products/product-thumb-3.jpg" alt="#"
                                                   class="thumb" /><span class="item-name">Zinc Tablet</span><span class="item-quantity">1
                                x <span class="item-amount">$15.00</span></span><a href="shop-single.jsp"
                                class="product-detail"></a><button class="remove">Remove</button></li>
                    </ul>
                    <div class="cart-footer">
                        <div class="shopping-cart-total"><strong>Subtotal:</strong>$90.00</div><a
                            href="shopping-cart.html" class="theme-btn btn-style-three"><span class="btn-title">View
                                Cart</span></a><a href="checkout.jsp" class="theme-btn btn-style-one"><span
                                class="btn-title">Checkout</span></a>
                    </div>
                </div><!-- End shopping-cart -->
            </div><!-- End Sidebar Cart -->
        </header>
        <!--End Main Header -->
        <!--Page Title-->
        <section class="page-title" style="background-image: url(images/background/8.jpg);">
            <div class="auto-container">
                <div class="title-outer">
                    <h1>Shopping Cart</h1>
                    <ul class="page-breadcrumb">
                        <li><a href="index.html">Home</a></li>
                        <li>Shop</li>
                    </ul>
                </div>
            </div>
        </section>
        <!--End Page Title-->
        <!--Cart Section-->
        <section class="cart-section">
            <div class="auto-container">
                <!--Cart Outer-->
                <div class="cart-outer">
                    <div class="table-outer">
                        <table class="cart-table">
                            <thead class="cart-header">
                                <tr>
                                    <th>图片预览</th>
                                    <th class="prod-column">产品名</th>
                                    <th class="price">单价</th>
                                    <th>数量</th>
                                    <th>总价</th>
                                    <th>&nbsp;</th>
                                </tr>
                            </thead>
                            <tbody id="shopcard_list_container">
                            </tbody>
                        </table>
                    </div>
                    <div class="cart-options clearfix">
                        <div class="pull-right"><button type="button" class="theme-btn cart-btn">更新购物车</button>
                        </div>
                    </div>
                </div>
                <div class="row justify-content-between">
                    <div class="column pull-right col-lg-6 col-md-6 col-sm-12">
                        <!--Totals Table-->
                        <ul class="totals-table">
                            <li>
                                <h3>Cart Totals</h3>
                            </li>
                            <li class="clearfix total"><span class="col">Sub Total</span><span
                                    class="col price">$35.00</span></li>
                            <li class="clearfix total"><span class="col">Total</span><span
                                    class="col price">$35.00</span></li>
                            <li class="text-right"><button type="submit" class="theme-btn proceed-btn">Proceed to
                                    Checkout</button></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <!--End Cart Section-->
        <!-- Clients Section -->
        <section class="clients-section alternate">
            <div class="auto-container">
                <!-- Sponsors Outer -->
                <div class="sponsors-outer">
                    <!--clients carousel-->
                    <ul class="clients-carousel owl-carousel owl-theme">
                        <li class="slide-item"><a href="#"><img src="images/clients/1.png" alt=""></a></li>
                        <li class="slide-item"><a href="#"><img src="images/clients/2.png" alt=""></a></li>
                        <li class="slide-item"><a href="#"><img src="images/clients/3.png" alt=""></a></li>
                        <li class="slide-item"><a href="#"><img src="images/clients/4.png" alt=""></a></li>
                        <li class="slide-item"><a href="#"><img src="images/clients/5.png" alt=""></a></li>
                    </ul>
                </div>
            </div>
        </section>
        <!--End Clients Section -->
        <!-- Main Footer -->
        <footer class="main-footer">
            <!--Widgets Section-->
            <div class="widgets-section" style="background-image: url(images/background/7.jpg);">
                <div class="auto-container">
                    <div class="row">
                        <!--Big Column-->
                        <div class="big-column col-xl-6 col-lg-12 col-md-12 col-sm-12">
                            <div class="row">
                                <!--Footer Column-->
                                <div class="footer-column col-xl-7 col-lg-6 col-md-6 col-sm-12">
                                    <div class="footer-widget about-widget">
                                        <div class="logo">
                                            <a href="index.html"><img src="images/logo-2.png" alt="" /></a>
                                        </div>
                                        <div class="text">
                                            <p>

                                                我们的诊所已经发展成为为诊所提供世界级设施

                                                高级修复剂 .
                                            </p>
                                            <p>我们是澳大利亚最合格的植入物提供商之一，拥有超过30家

                                                多年的质量培训和经验.</p>
                                        </div>
                                        <ul class="social-icon-three">
                                            <li>
                                                <a href="#">
                                                    <i class="fab fa-facebook-f"></i>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="#">
                                                    <i class="fab fa-google-plus-g"></i>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="#">
                                                    <i class="fab fa-twitter"></i>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="#">
                                                    <i class="fab fa-skype"></i>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="#">
                                                    <i class="fab fa-linkedin-in"></i>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <!--Footer Column-->
                                <div class="footer-column col-xl-5 col-lg-6 col-md-6 col-sm-12">
                                    <div class="footer-widget">
                                        <h2 class="widget-title">部门</h2>
                                        <ul class="user-links">
                                            <li>
                                                <a href="#">外科与放射学</a>
                                            </li>
                                            <li>
                                                <a href="#">家庭医学</a>
                                            </li>
                                            <li>
                                                <a href="#">女性健康</a>
                                            </li>
                                            <li>
                                                <a href="#">配镜师</a>
                                            </li>
                                            <li>
                                                <a href="#">儿科学</a>
                                            </li>
                                            <li>
                                                <a href="#">皮肤病科</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--Big Column-->
                        <div class="big-column col-xl-6 col-lg-12 col-md-12 col-sm-12">
                            <div class="row">
                                <!--Footer Column-->
                                <div class="footer-column col-lg-6 col-md-6 col-sm-12">
                                    <!--Footer Column-->
                                    <div class="footer-widget recent-posts">
                                        <h2 class="widget-title">新闻</h2>
                                        <!--Footer Column-->
                                        <div class="widget-content">
                                            <div class="post">
                                                <div class="thumb">
                                                    <a href="blog-post-image.html"><img
                                                            src="images/resource/post-thumb-1.jpg" alt=""></a>
                                                </div>
                                                <h4>
                                                    <a href="blog-post-image.html">整合医学
                                                        <br>& 癌症治疗.</a>
                                                </h4>
                                                <span class="date">7月 11,2019</span>
                                            </div>
                                            <div class="post">
                                                <div class="thumb">
                                                    <a href="blog-post-image.html"><img
                                                            src="images/resource/post-thumb-2.jpg" alt=""></a>
                                                </div>
                                                <h4>
                                                    <a href="blog-post-image.html">获得更好的
                                                        <br>医护时间.</a>
                                                </h4>
                                                <span class="date">8月 1,2019</span>
                                            </div>
                                            <div class="post">
                                                <div class="thumb">
                                                    <a href="blog-post-image.html"><img
                                                            src="images/resource/post-thumb-3.jpg" alt=""></a>
                                                </div>
                                                <h4>
                                                    <a href="blog-post-image.html">最好的医护
                                                        <br></a>
                                                </h4>
                                                <span class="date">8月 1,2019</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Footer Column-->
                                <div class="footer-column col-lg-6 col-md-6 col-sm-12">
                                    <!--Footer Column-->
                                    <div class="footer-widget contact-widget">
                                        <h2 class="widget-title">联系我们</h2>
                                        <!--Footer Column-->
                                        <div class="widget-content">
                                            <ul class="contact-list">
                                                <li>
                                                    <span class="icon flaticon-placeholder"></span>
                                                    <div class="text">圣地亚哥富尔顿街2130号
                                                        <br>CA 94117-1080 USA
                                                    </div>
                                                </li>
                                                <li>
                                                    <span class="icon flaticon-call-1"></span>
                                                    <div class="text">周一 至 周五:08:30 - 18:00</div>
                                                    <a href="tel:+89868679575">
                                                        <strong>+898 68679 575</strong>
                                                    </a>
                                                </li>
                                                <li>
                                                    <span class="icon flaticon-email"></span>
                                                    <div class="text">是否有更多疑惑？<br>
                                                        <a href="mailto:info@gmail.com">
                                                            <strong>info@gmail.com</strong>
                                                        </a>
                                                    </div>
                                                </li>
                                                <li>
                                                    <span class="icon flaticon-back-in-time"></span>
                                                    <div class="text">周一 - Sat 8.00 - 18.00<br>
                                                        <strong>周日关闭</strong>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--Footer Bottom-->
            <div class="footer-bottom">
                <!-- Scroll To Top -->
                <div class="scroll-to-top scroll-to-target" data-target="html">
                    <span class="fa fa-angle-up"></span>
                </div>
                <div class="auto-container">
                    <div class="inner-container clearfix">
                        <div class="footer-nav">
                            <ul class="clearfix">
                                <li>
                                    <a href="index.html">隐私政策 </a>
                                </li>
                                <li>
                                    <a href="about-us.html">联系</a>
                                </li>
                                <li>
                                    <a href="services.html">供应商</a>
                                </li>
                            </ul>
                        </div>
                        <div class="copyright-text">
                            <p>Copyright 漏 2019
                                <a href="http://www.bootstrapmb.com/">bootstrapmb</a>All Rights Reserved.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!--End Main Footer -->
    </div><!-- End Page Wrapper -->
    <script src="js/jquery.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.fancybox.js"></script>
    <script src="js/jquery.modal.min.js"></script>
    <script src="js/mmenu.polyfills.js"></script>
    <script src="js/mmenu.js"></script>
    <script src="js/appear.js"></script>
    <script src="js/jquery.bootstrap-touchspin.js"></script>
    <script src="js/owl.js"></script>
    <script src="js/wow.js"></script>
    <script src="js/script.js"></script>
    <script>
        init()
        function init(){
            let token = localStorage.getItem("healthy_care_token")
            if(token == null)
                window.location.replace("login.html")
            getCardItems(token);
        }
        function getCardItems(token){
            let req = new XMLHttpRequest();
            req.open("POST", "./ShopCardServlet", true);
            req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            req.setRequestHeader("token", token);
            req.onreadystatechange = function(){
                if(req.readyState === 4 && req.status === 200){
                    let res = JSON.parse(req.responseText);
                    if(res.code === 200){
                        setCardItems(res.data);
                    }else{
                        alert(res.message + "\n" + res.data)
                    }
                }
            }
            req.send("action=search");
        }
        function setCardItems(data){
            let itemsContainer = $("#card_container")
            let content = ""
            for (let i = 0; i < data.length; i++) {
                content = content +
                    `<li class="cart-item">
                        <img src="images/resource/products/product-thumb-1.jpg" alt="#"class="thumb" />
                        <span class="item-name">${data[i].merchandise_name}</span>
                        <span class="item-quantity">${data[i].num} x
                        <span class="item-amount">$${data[i].price}</span></span>
                        <a href="shop-single.jsp" class="product-detail"></a>
                        <button class="remove">删除</button>
                    </li>`
            }
            itemsContainer.html(content)
            content = ""
            itemsContainer = $("#shopcard_list_container")
            for (let i = 0; i < data.length; i++) {
                content = content +
                    `<tr>
                        <td class="prod-column">
                            <div class="column-box">
                                <figure class="prod-thumb"><a href="#"><img
                                    src="images/resource/products/cart-img.jpg" alt=""></a></figure>
                            </div>
                        </td>
                        <td>
                            <h4 class="prod-title">${data[i].merchandise_name}</h4>
                        </td>
                        <td class="sub-total">$${data[i].price}</td>
                        <td class="qty">
                            <div class="item-quantity"><input class="quantity-spinner" type="text" value="${data[i].num}"
                                                                  name="quantity"></div>
                        </td>
                        <td class="total">$${(data[i].price * data[i].num).toFixed(2)}</td>
                        <td><a href="#" class="remove-btn"><span class="fa fa-times"></span></a></td>
                    </tr>`
            }
            itemsContainer.html(content)
        }

    </script>
</body>

</html>